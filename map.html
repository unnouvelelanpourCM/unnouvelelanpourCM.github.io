<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Un nouvel Ã©lan pour Coursonâ€‘Monteloup</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

<style>
:root {
  --blue: #1c3478;
  --yellow: #ebba34;
  --light: #f7f7f7;
  --dark: #111;
}

body {
  margin: 0;
  font-family: "Segoe UI", system-ui, sans-serif;
  color: var(--blue);
  line-height: 1.6;
  background: white;
}

/* âœ… Sections */
section {
  max-width: 1100px;
  margin: auto;
  padding: 3rem 1.5rem;
}

/* âœ… Carte */
.map-header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.map-header h2 {
  margin-bottom: 0.4rem;
}

.map-header p {
  margin: 0;
  color: #555;
}

.filters {
  text-align: center;
  margin-bottom: 1rem;
}

.filters label {
  margin: 0 10px;
  padding: 6px 12px;
  background: var(--light);
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
}

#map {
  height: 70vh;
  border-radius: 12px;
  overflow: hidden;
}

/* âœ… Footer */
footer {
  background: var(--light);
  text-align: center;
  padding: 2rem 1rem;
  font-size: 0.9rem;
}
</style>
</head>

<body>

<!-- âœ… SECTION CARTE -->
<section>

  <!-- âœ… TITRE + TEXTE DEMANDÃ‰S -->
  <header class="map-header">
    <h2>Nos engagements sur le territoire</h2>
    <p>
      Cliquez sur les diffÃ©rents lieux du village pour dÃ©couvrir
      les actions concrÃ¨tes que nous proposons.
    </p>
  </header>

  <!-- âœ… FILTRES -->
  <div class="filters">
    <label>
      <input type="checkbox" checked data-layer="batiments">
      ğŸ›ï¸ BÃ¢timents
    </label>
    <label>
      <input type="checkbox" checked data-layer="routes">
      ğŸ›£ï¸ Routes
    </label>
  </div>

  <!-- âœ… CARTE -->
  <div id="map"></div>

</section>

<!-- âœ… FOOTER -->
<footer>
  Â© 2026 â€“ Un nouvel Ã©lan pour Coursonâ€‘Monteloup
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const map = L.map('map');

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Â© OpenStreetMap'
}).addTo(map);

const layers = {
  batiments: L.layerGroup().addTo(map),
  routes: L.layerGroup().addTo(map)
};

const points = [
  {
    coords: [48.592975, 2.144877],
    cat: 'batiments',
    title: 'ğŸ›ï¸ Mairie',
    txt: 'RÃ©novation et mise en valeur du bÃ¢timent communal.'
  },
  {
    coords: [48.592871, 2.145158],
    cat: 'batiments',
    title: 'ğŸšï¸ Petite grange',
    txt: 'RÃ©habilitation du patrimoine local.'
  },
  {
    coords: [48.592824, 2.145166],
    cat: 'routes',
    title: 'ğŸ›£ï¸ Centreâ€‘bourg',
    txt: 'RÃ©fection des voiries et sÃ©curisation.'
  },
  {
    coords: [48.600915, 2.156805],
    cat: 'routes',
    title: 'ğŸš§ La RonciÃ¨re',
    txt: 'AmÃ©lioration des accÃ¨s et de la circulation.'
  }
];

points.forEach(p => {
  L.marker(p.coords)
    .bindPopup(`<strong>${p.title}</strong><br>${p.txt}`)
    .addTo(layers[p.cat]);
});

/* âœ… Limite commune */
fetch('https://nominatim.openstreetmap.org/search?q=Courson-Monteloup,Essonne,France&format=geojson&polygon_geojson=1')
  .then(r => r.json())
  .then(data => {
    const commune = L.geoJSON(data, {
      style: { color:'#1c3478', weight:3, fillOpacity:0.08 }
    }).addTo(map);

    map.fitBounds(commune.getBounds(), { padding:[20,20] });
    map.setMaxBounds(commune.getBounds());
  });

/* âœ… Filtres */
document.querySelectorAll('.filters input').forEach(input => {
  input.addEventListener('change', e => {
    const layer = layers[e.target.dataset.layer];
    e.target.checked
      ? map.addLayer(layer)
      : map.removeLayer(layer);
  });
});
</script>

</body>
</html>

